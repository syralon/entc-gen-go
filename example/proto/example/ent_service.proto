// Code generated by chocoproto. DO NOT EDIT.
syntax = "proto3";

package proto.example;

import "google/api/annotations.proto";

import "google/protobuf/timestamp.proto";

import "openapiv3/annotations.proto";

import "proto/example/ent.proto";

import "syralon/entproto/field.proto";

import "syralon/entproto/paginator.proto";

option go_package = "github.com/syralon/entc-gen-go/example/proto/example";

message GroupOptions {
  syralon.entproto.Int64Field id = 1;

  optional syralon.entproto.StringField name = 2;

  optional syralon.entproto.TimestampField created_at = 3;

  optional syralon.entproto.TimestampField updated_at = 4;

  UserOptions group_users = 5;
}

message UserOptions {
  syralon.entproto.Int64Field id = 1;

  // The user name
  optional syralon.entproto.StringField name = 2 [
    (openapi.v3.property) = { description: "The name" }
  ];

  // The created time
  optional syralon.entproto.TimestampField created_at = 3;

  // The latest update time
  optional syralon.entproto.TimestampField updated_at = 4;

  optional syralon.entproto.Int64Field group_id = 5;

  optional syralon.entproto.Int32Field status = 6;

  GroupOptions user_groups = 7;
}

message GroupUpdate {
  optional string name = 1;

  UserUpdate group_users = 2;
}

message UserUpdate {
  // The user name
  optional string name = 1 [
    (openapi.v3.property) = { description: "The name" }
  ];

  optional int64 group_id = 2;

  optional int32 status = 3;

  GroupUpdate user_groups = 4;
}

message ListGroupOrder {
  GroupOrder by = 1;

  bool desc = 2;
}

message ListUserOrder {
  UserOrder by = 1;

  bool desc = 2;
}

message GetGroupRequest {
  int64 id = 1;
}

message GetGroupResponse {
  Group data = 1;
}

message GetUserRequest {
  int64 id = 1;
}

message GetUserResponse {
  User data = 1;
}

message ListGroupRequest {
  GroupOptions options = 1;

  repeated ListGroupOrder orders = 2;

  syralon.entproto.Paginator paginator = 3;
}

message ListGroupResponse {
  repeated Group data = 1;
}

message ListUserRequest {
  UserOptions options = 1;

  repeated ListUserOrder orders = 2;

  syralon.entproto.Paginator paginator = 3;
}

message ListUserResponse {
  repeated User data = 1;
}

message CreateUserRequest {
  int64 id = 1;

  // The user name
  string name = 2 [
    (openapi.v3.property) = { description: "The name" }
  ];

  // The created time
  google.protobuf.Timestamp created_at = 3;

  // The latest update time
  google.protobuf.Timestamp updated_at = 4;

  int64 group_id = 5;

  int32 status = 6;

  repeated Group user_groups = 7;
}

message CreateUserResponse {
  int64 id = 1;
}

message UpdateUserRequest {
  int64 id = 1;

  UserUpdate update = 2;
}

message UpdateUserResponse {
}

message DeleteUserRequest {
  int64 id = 1;
}

message DeleteUserResponse {
}

message SetUserGroupIdRequest {
  int64 id = 1;

  UserOptions options = 2;

  int64 group_id = 3;
}

message SetUserGroupIdResponse {
  int32 rows = 1;
}

message SetUserStatusRequest {
  int64 id = 1;

  UserOptions options = 2;

  int32 status = 3;
}

message SetUserStatusResponse {
  int32 rows = 1;
}

message ListUserUserGroupsRequest {
  int64 id = 1;

  GroupOptions options = 2;

  repeated ListGroupOrder orders = 3;

  syralon.entproto.Paginator paginator = 4;
}

enum GroupOrder {
  GROUP_ORDER_BY_ID = 0;

  GROUP_ORDER_BY_CREATED_AT = 1;

  GROUP_ORDER_BY_UPDATED_AT = 2;
}

enum UserOrder {
  USER_ORDER_BY_ID = 0;

  USER_ORDER_BY_CREATED_AT = 1;

  USER_ORDER_BY_GROUP_ID = 2;
}

service GroupService {
  rpc Get ( GetGroupRequest ) returns ( GetGroupResponse ) {
    option (google.api.http) = { get: "/v1/group/{id}" };
  }

  rpc List ( ListGroupRequest ) returns ( ListGroupResponse ) {
    option (google.api.http) = { get: "/v1/group" };
  }
}

service UserService {
  rpc SetGroupId ( SetUserGroupIdRequest ) returns ( SetUserGroupIdResponse ) {
    option (google.api.http) = { put: "/v1/user/{id}/group_id", body: "*" };
  }

  rpc SetStatus ( SetUserStatusRequest ) returns ( SetUserStatusResponse ) {
    option (google.api.http) = { put: "/v1/user/{id}/status", body: "*" };
  }

  rpc ListUserGroups ( ListUserUserGroupsRequest ) returns ( ListGroupResponse ) {
    option (google.api.http) = { get: "/v1/user/{id}/usergroups" };
  }

  rpc Get ( GetUserRequest ) returns ( GetUserResponse ) {
    option (google.api.http) = { get: "/v1/user/{id}" };
  }

  rpc List ( ListUserRequest ) returns ( ListUserResponse ) {
    option (google.api.http) = { get: "/v1/user" };
  }

  rpc Create ( CreateUserRequest ) returns ( CreateUserResponse ) {
    option (google.api.http) = { post: "/v1/user", body: "*" };
  }

  rpc Update ( UpdateUserRequest ) returns ( UpdateUserResponse ) {
    option (google.api.http) = { put: "/v1/user/{id}", body: "*" };
  }

  rpc Delete ( DeleteUserRequest ) returns ( DeleteUserResponse ) {
    option (google.api.http) = { delete: "/v1/user/{id}" };
  }
}
